pipeline {
  agent any
  stages{
    stage('package'){
       steps{
         echo "package- code"
         sh 'mvn clean package -DskipTests'
        }
      }
      stage('build'){
       steps{
        script{
            def dimage = docker.build("ci-cd-demo")
        }
         echo "image build"
       }
      }
      stage('push'){
      steps{
        script{
            dimage.push('latest')
        }
        echo "push docker image"
      }
      }
  }

 }